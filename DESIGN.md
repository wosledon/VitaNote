# VitaNote 健康管理系统 - 需求设计文档

## 1. 系统概述

VitaNote 是一个面向慢性病患者（特别是糖尿病患者）的智能健康管理平台。系统整合移动摄影、AI 智能识别、数据追踪和个性化健康管理等功能，帮助用户实现全面的健康监控与管理。

### 1.1 核心理念

- **智能化**: 利用 AI 技术自动识别食物热量、营养成分、血糖数值等
- **便捷性**: 拍照即管理，减少手动输入负担
- **个性化**: 基于用户健康数据提供定制化健康管理建议
- **专业性**: 专为糖尿病患者设计的专业健康管理工具

### 1.2 目标用户群体

- 糖尿病患者（Type 1 & Type 2）
- 需要控制饮食热量的人群
- 注重健康管理的普通用户
- 医疗专业人士（可选扩展）

---

## 2. 核心功能模块

### 2.1 拍照识物模块（AI Camera）

#### 2.1.1 拍照预估热量
- **功能描述**: 用户拍摄食物照片，AI 自动识别食物种类并估算热量
- **识别内容**:
  - 食物种类识别（中餐/西餐/快餐等）
  - 分量估算（基于图像分析和常见餐具参考）
  - 热量计算（卡路里、蛋白质、脂肪、碳水化合物）
  - 糖尿病相关指标（GI 值、碳水含量）
- **用户体验**:
  - 支持相册选择和相机拍摄两种方式
  - 拍照后自动弹出识别结果界面
  - 一键保存到饮食记录
  - 支持手动调整识别结果（分量、食物种类等）

#### 2.1.2 拍照读取数值
- **功能描述**: 拍摄医疗设备屏幕或报告，自动提取数值
- **支持场景**:
  - 血糖仪读数识别
  - 血压计读数识别
  - 体重秤读数识别
  - 医院检查报告（血常规、糖化血红蛋白等）
  - 药品标签识别（药品名称、剂量）
- **识别精度**:
  - 支持数字、单位自动识别
  - 支持中文报告识别
  - 提供识别置信度提示
  - 支持手动校正

#### 2.1.3 拍照跳转流程
- **拍照 → 智能识别 → 数据输入 → 保存记录** 的完整流程
- 支持从主界面快速进入拍照功能
- 支持从饮食日志、血糖日志等页面直接发起拍照
- 拍照后自动携带上下文信息（如当前日期、时间、用户状态）

---

### 2.2 饮食管理模块

#### 2.2.1 饮食记录
- **功能描述**: 全面记录用户的饮食情况
- **记录内容**:
  - 餐次（早餐、午餐、晚餐、加餐）
  - 食物名称、分量、热量
  - 营养成分（碳水、蛋白质、脂肪）
  - GI/GLoad（升糖指数/升糖负荷）
  - 备注（餐厅、品牌、特殊准备方式）
- **记录方式**:
  - 手动输入（搜索食物库）
  - 拍照识别（AI 识别）
  - 食物库常选（快速recall）
  - 条形码扫描（支持包装食品）

#### 2.2.2 食物数据库
- **内置数据库**:
  - 中国食物成分表（标准版）
  - 常见外卖平台食物数据库
  - 医院糖尿病膳食数据库
  - 国际食物数据库（USDA、CIAD）
- **数据字段**:
  - 食物ID、名称、分类
  - 热量（kcal）、蛋白质（g）、脂肪（g）、碳水（g）
  - GI 值、GLoad、膳食纤维
  - 常见份量（100g、1杯、1碗等）
- **用户自定义**:
  - 添加自定义食物
  - 自定义份量和营养成分
  - 创建个人常用食谱

#### 2.2.3 饮食分析
- **实时分析**:
  - 当日总热量、三大营养素比例
  - 每餐碳水摄入量（糖尿病重点监控）
  - 饮食规律性分析（三餐时间、加餐频率）
- **趋势分析**:
  - 每日/每周平均热量摄入
  - 饮食模式变化趋势
  - 碳水摄入稳定性分析
- **健康提示**:
  - 过量摄入提醒（糖、油、盐）
  - 营养均衡建议
  - 饮食规律性提醒

---

### 2.3 血糖管理模块

#### 2.3.1 血糖记录
- **功能描述**: 记录和追踪血糖水平
- **记录内容**:
  - 血糖值（mmol/L 或 mg/dL）
  - 测量时间（空腹、餐前、餐后 1h/2h、睡前）
  - 测量部位（指尖、ARM 等）
  - 测量设备信息
  - 相关事件（饮食、运动、用药）
- **快速录入**:
  - 拍照血糖仪识别（自动读取数值和时间）
  - 快捷录入（常用时间点模板）
  - 批量导入（血糖仪数据同步）

#### 2.3.2 糖化血红蛋白（HbA1c）
- **记录功能**:
  - 历史 HbA1c 记录
  - 计算估算平均血糖（eAG）
  - TIR（血糖目标范围内时间）计算
- **目标设定**:
  - 个性化 HbA1c 目标（医生建议）
  - TIR 目标范围（70-180 mg/dL）

#### 2.3.3 血糖分析
- **实时视图**:
  - 当日血糖曲线图
  - 餐前/餐后血糖对比
  - 空腹血糖趋势
- **统计分析**:
  - 日/周/月平均血糖
  - 高血糖/低血糖发生次数和时长
  - 血糖波动系数
  - 餐后血糖增幅分析
- **预警提示**:
  - 低血糖风险预警
  - 高血糖风险预警
  - 血糖波动过大提醒

---

### 2.4 用药管理模块

#### 2.4.1 用药记录
- **功能描述**: 管理所有用药情况
- **记录内容**:
  - 药品名称、剂量、频率
  - 用药时间（早餐前、晚餐后等）
  - 用药方式（口服、注射等）
  - 用药原因（餐时胰岛素、基础胰岛素等）
- **特殊功能**:
  - 胰岛素计划（基础率、餐时量）
  - 药物提醒（按时用药）
  - 药物相互作用提醒

#### 2.4.2 胰岛素管理（糖尿病专属）
- **胰岛素类型**:
  - 超短效（门冬、赖脯）
  - 短效（常规）
  - 中效（NPH）
  - 长效（甘精、德谷）
  - 预混胰岛素
- **剂量计算**:
  - 碳水计量法（1单位胰岛素对应X克碳水）
  - 纠正剂量（高血糖矫正）
  - 动态调整建议

---

### 2.5 运动管理模块

#### 2.5.1 运动记录
- **功能描述**: 记录运动活动
- **记录内容**:
  - 运动类型（步行、跑步、游泳、瑜伽等）
  - 运动时长、强度
  - 消耗热量（估算）
  - 运动前后血糖（可选）
- **数据来源**:
  - 手动输入
  - 手机/手表传感器自动记录
  - 连接智能设备（Apple Health、Google Fit）

#### 2.5.2 运动建议
- **个性化建议**:
  - 基于健康状况的运动推荐
  - 运动最佳时间段（避免低血糖）
  - 运动前后血糖监测提醒

---

### 2.6 体重与体脂管理

#### 2.6.1 体重记录
- **记录内容**:
  - 体重、体脂率、肌肉量
  - 测量时间（晨起/晚间）
  - 测量条件（空腹/餐后）
  - 测量设备

#### 2.6.2 BMI 计算
- 自动计算 BMI 并分类
- 健康体重目标设定
- 体重变化趋势分析

---

### 2.7 AI 健康助手（聊天机器人）

#### 2.7.1 聊天功能
- **自然语言交互**:
  - "我今天吃了什么？"
  - "我的血糖控制得怎么样？"
  - "明天饮食有什么建议？"
  - "帮我分析本周的血糖数据"

#### 2.7.2 健康建议
- **个性化建议**:
  - 饮食建议（基于当前血糖、饮食记录）
  - 用药调整建议（ notifier，非处方建议）
  - 运动建议（基于活动量和血糖）
  - 生活习惯建议（睡眠、压力管理）

#### 2.7.3 知识库
- **糖尿病知识**:
  - 疾病知识问答
  - 饮食知识（食物GI、碳水计算）
  - 血糖管理技巧
  - 并发症预防

#### 2.7.4 对话模式
- **总结模式**（每日/每周总结）
- **问答模式**（实时问答）
- **指导模式**（引导用户记录和管理）

---

### 2.8 目标与提醒模块

#### 2.8.1 健康目标
- **目标设定**:
  - 血糖目标范围（空腹、餐后）
  - 热量摄入目标
  - 碳水摄入目标（每餐）
  - 体重目标
  - 运动目标（次数、时长）

#### 2.8.2 智能提醒
- **提醒类型**:
  - 用药提醒（按时服药/注射）
  - 测血糖提醒（空腹、餐后）
  - 餐饮提醒（按时吃饭）
  - 运动提醒（久坐提醒）
  - 睡眠提醒（规律作息）

#### 2.8.3 报告生成
- **定期报告**:
  - 每日总结（睡眠、饮食、运动、血糖）
  - 每周报告（趋势分析、达标率）
  - 月度报告（详细统计、专业建议）
  - 导出分享（医生、家人）

---

## 3. 用户管理模块

### 3.1 多用户支持
- 家庭账户管理
- 医生/家人查看权限（可选）

### 3.2 个人资料
- 基本信息（年龄、性别、身高、体重）
- 疾病信息（糖尿病类型、病程）
- 治疗方案（药物、胰岛素方案）
- 目标设定（血糖、体重、A1c）

---

## 4. 数据可视化模块

### 4.1 图表展示
- **血糖曲线**: 动态查看血糖变化趋势
- **饮食分布**: 热量、碳水分布图
- **体重趋势**: 长期体重变化
- **相关性分析**: 饮食-血糖-运动关系图

### 4.2 仪表盘
- **今日概览**:
  - 当日达成目标情况
  - 关键指标快照
  - 待办事项提醒

---

## 5. AI 技术实现要点

### 5.1 图像识别
- **食物识别**:
  - 使用深度学习模型（ResNet、EfficientNet）
  - 支持中餐识别（中餐分类和分量估算）
  - 基于常见餐具的分量参考
- **数字识别**:
  -OCR 技术识别血糖仪、血压计屏幕
  - 支持多种设备型号
  - 图像增强和去噪

### 5.2 自然语言处理
- **意图识别**: 理解用户问题意图
- **实体抽取**: 提取血糖、热量、时间等关键信息
- **知识问答**: 基于糖尿病知识库的回答生成
- **个性化推荐**: 基于用户数据的建议生成

### 5.3 数据分析
- **机器学习模型**:
  - 血糖预测模型（基于饮食、运动、用药）
  - 低血糖风险预警
  - 饮食模式分析
- **统计分析**:
  - 相关性分析（碳水摄入与血糖增幅）
  - 趋势预测（A1c 预测）

---

## 6. 系统特性

### 6.1 数据同步
- 云端数据备份
- 多设备同步
- 离线模式支持

### 6.2 安全隐私
- 数据加密存储
- 本地优先（敏感数据本地处理）
- 隐私保护（用户数据所有权）
- 符合医疗数据法规

### 6.3 离线能力
- 核心功能离线可用
- 拍照识别本地模型
- 数据缓存和同步

---

## 7. 未来扩展方向

### 7.1 设备集成
- 连接智能血糖仪（蓝牙）
- 连接 CGM（连续血糖监测）
- 连接胰岛素泵
- 连接可穿戴设备（Apple Watch、华为手表）

### 7.2 医疗协作
- 医生端 APP
- 远程监控功能
- 数据共享（患者授权）

### 7.3 高级 AI 功能
- 语音输入（语音记录饮食、血糖）
- 拍照识药（药品标签识别）
- 食谱生成（基于健康目标）
- 自动总结（每日健康总结）

---

## 8. 用户体验设计原则

### 8.1 简洁直观
- 减少手动输入
- 一键操作（拍照即记录）
- 清晰的视觉反馈

### 8.2 可信赖
- 数据准确（识别精度）
- 建议专业（基于医学指南）
- 可解释性（为什么这样建议）

### 8.3 个性化
- 适应用户习惯
- 可定制的提醒
- 个人化的建议

---

## 9. 非功能需求

### 9.1 性能
- 拍照识别响应时间 < 3 秒
- 数据加载时间 < 1 秒
- 离线模式流畅运行

### 9.2 兼容性
- iOS / Android / Windows / macOS
- 各类手机型号适配
- 医疗设备兼容

### 9.3 可用性
- 简单的用户培训
- 完善的帮助文档
- 在线客服支持

---

## 10. 总结

VitaNote 致力于为糖尿病患者和关注健康的用户提供一个全面、智能、便捷的健康管理平台。通过 AI 技术的深度集成，系统能够自动识别食物、读取医疗数据、提供个性化建议，帮助用户更好地管理健康，提高生活质量。

核心价值主张：
1. **智能识别**: AI 自动识别食物和医疗数据，减少手动输入
2. ** diabetes focused**: 专为糖尿病患者设计的功能
3. ** Complete management**: 全面的健康管理（饮食、血糖、用药、运动）
4. **Personal assistant**: 24/7 的 AI 健康助手
